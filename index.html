<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Twittler</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
    <script src="tweet_functions.js"></script>
  </head>
  <body>

    <script>

      $(document).ready(function(){
        var $body = $('body');
        $body.html('');

        var mainBody = $('<div></div>');
        mainBody.attr('id','mainBody');
        mainBody.appendTo($body);

        //user to tweet section
        var newTweet = $('<div></div>');
        newTweet.attr('id','newTweetSection');
        newTweet.appendTo(mainBody);
        var newTweetInput = $('<textarea type="text" name="textbox">');
        newTweetInput.attr('id','newTweetInput');
        var submitTweetButton = $('<button></button>');
        submitTweetButton.text('Tweet!');
        submitTweetButton.attr('id','submitTweetButton');
        submitTweetButton.on('click', submitNewTweet);
        newTweetInput.appendTo(newTweet);
        submitTweetButton.appendTo(newTweet);


        var timeline = $('<div></div>');
        timeline.attr('id','timeline');
        
        var twittler = new Twittler();

        var newTweetsButton = $('<button></button>');
        newTweetsButton.text('Check New Tweets');
        newTweetsButton.attr('id','newTweetsButton');
        newTweetsButton.appendTo(mainBody);
        newTweetsButton.on('click', function(){
        var startIndex = twittler.getLastTweetIndex();
        var endIndex = streams.home.length - 1;
        twittler.setLastTweetIndex(endIndex+1);
        twittler.tweets(startIndex, endIndex);
        });
        
        timeline.appendTo(mainBody);
        
        var index = streams.home.length - 1;

        twittler.setLastTweetIndex(index+1);
        twittler.tweets(0, index);

        updateNewTweetsNumber(twittler);
      });

    </script>    
  </body>
</html>
